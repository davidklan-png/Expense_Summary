# Workflow UI Component Tree

## Visual Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        STICKY HEADER                             â”‚
â”‚  ğŸ’³ Saison Transform  â”‚  â‘ â”€â”€â‘¡â”€â”€â‘¢  â”‚  ğŸ”„ Reset                  â”‚
â”‚  Financial Processor  â”‚  Step Indicator â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         MAIN CONTENT                             â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STEP 1: UPLOAD  (id="step-1")                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  â‘  Upload Your Files                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Upload transaction CSV files to begin processing     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  [Drag & Drop Zone]                                         â”‚ â”‚
â”‚  â”‚  or click to browse â€¢ Accepts CSV files                    â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ“„ file1.csv  â”‚  25.3 KB  â”‚  âœ… Ready                     â”‚ â”‚
â”‚  â”‚  ğŸ“„ file2.csv  â”‚  18.7 KB  â”‚  âœ… Ready                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  ğŸ“Š 2 file(s) uploaded and ready for processing            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚         [ğŸš€ Continue to Review & Edit (2 files)]           â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STEP 2: PROCESS & EDIT  (id="step-2")                    â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  â‘¡ Review & Edit                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Process files and review the generated data          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  â³ Processing Files         2 remaining              â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚         [ğŸš€ Process 2 Files]                                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  OR (after processing):                                     â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  âœ… 2 file(s) processed and ready for review               â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Select file to edit: [file1.csv â–¼]                        â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â–¶ ğŸ“ Edit: file1.csv                                      â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Total Rows: 45  â”‚  Processed: 12  â”‚  Attendees: 8â”‚ â”‚
â”‚  â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  [Data Table with filtering and editing]         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â˜ Show all rows                                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚                                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  â–¶ ğŸ‘¥ Unique Attendees (8)                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚  â””                                                          â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚         [ğŸ’¾ Continue to Download (2 files)]                â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  STEP 3: DOWNLOAD  (id="step-3")                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  â‘¢ Download Results                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Your files are ready! Download them individually     â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”                            â”‚ â”‚
â”‚  â”‚  â”‚Files â”‚Trans â”‚Attendâ”‚Statusâ”‚                            â”‚ â”‚
â”‚  â”‚  â”‚  2   â”‚  45  â”‚  8   â”‚  âœ…  â”‚                            â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜                            â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  Format: â—‹ CSV  â—‹ Excel  â—‹ HTML  â— All Formats (ZIP)      â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚  Batch Download                                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ“¦ Download all files in a single ZIP archive        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                        â”‚  â”‚ â”‚
â”‚  â”‚  â”‚         [ğŸ“¦ Download All (ZIP)]                        â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚  â”‚  âœ… Complete     â”‚  ğŸ”„ Process More Files?         â”‚   â”‚ â”‚
â”‚  â”‚  â”‚  Files processed â”‚  Click Reset in header          â”‚   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â”‚         [ğŸ”„ Process New Files]                             â”‚ â”‚
â”‚  â”‚                                                             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SIDEBAR                                â”‚
â”‚  âš™ï¸ Settings                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ğŸŒ Network Access                                        â”‚  â”‚
â”‚  â”‚  Local: http://localhost:8502                            â”‚  â”‚
â”‚  â”‚  Network: http://192.168.1.100:8502                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  âœ… 150 attendees loaded                                        â”‚
â”‚  ğŸ“„ NameList.csv                                                â”‚
â”‚  â–¶ ğŸ“‚ Reference Data                                            â”‚
â”‚  â–¶ ğŸ”§ Processing Parameters                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
web_app.py (main)
â”œâ”€â”€ initialize_session_state()
â”œâ”€â”€ load_attendee_reference()
â”œâ”€â”€ process_file()
â”œâ”€â”€ render_editor()
â”œâ”€â”€ generate_report()
â””â”€â”€ main()
    â”œâ”€â”€ get_workflow_styles()               [CSS injection]
    â”œâ”€â”€ render_sticky_header()              [Fixed header]
    â”‚   â”œâ”€â”€ WorkflowStep enum
    â”‚   â”œâ”€â”€ get_current_step()
    â”‚   â”œâ”€â”€ get_step_status()
    â”‚   â””â”€â”€ reset_workflow() [button]
    â”‚
    â”œâ”€â”€ SIDEBAR
    â”‚   â”œâ”€â”€ Network Info (get_network_info())
    â”‚   â”œâ”€â”€ Attendee Status
    â”‚   â””â”€â”€ Expanders
    â”‚       â”œâ”€â”€ Reference Data
    â”‚       â””â”€â”€ Processing Parameters
    â”‚
    â”œâ”€â”€ render_upload_step()                [Step 1]
    â”‚   â”œâ”€â”€ Section Header
    â”‚   â”œâ”€â”€ File Uploader
    â”‚   â”œâ”€â”€ Upload Zone (custom HTML)
    â”‚   â”œâ”€â”€ File List
    â”‚   â””â”€â”€ Continue Button
    â”‚       â””â”€â”€ advance_to_next_step()
    â”‚
    â”œâ”€â”€ render_process_edit_step()          [Step 2]
    â”‚   â”œâ”€â”€ Accessibility Check (can_access_step)
    â”‚   â”œâ”€â”€ Section Header
    â”‚   â”œâ”€â”€ Process Button
    â”‚   â”‚   â”œâ”€â”€ Progress Bar
    â”‚   â”‚   â””â”€â”€ process_file() [callback]
    â”‚   â”œâ”€â”€ File Selector (if multiple)
    â”‚   â””â”€â”€ render_editor() [callback]
    â”‚       â”œâ”€â”€ Metrics (rows, transactions, attendees)
    â”‚       â”œâ”€â”€ Show All Checkbox
    â”‚       â”œâ”€â”€ Data Table (st.dataframe)
    â”‚       â””â”€â”€ Attendees Expander
    â”‚
    â”œâ”€â”€ render_download_step()              [Step 3]
    â”‚   â”œâ”€â”€ Accessibility Check (can_access_step)
    â”‚   â”œâ”€â”€ Section Header
    â”‚   â”œâ”€â”€ Summary Metrics
    â”‚   â”œâ”€â”€ Format Radio Selector
    â”‚   â”œâ”€â”€ Download Buttons
    â”‚   â”‚   â”œâ”€â”€ Individual (CSV/Excel/HTML)
    â”‚   â”‚   â””â”€â”€ Batch (ZIP)
    â”‚   â”‚       â””â”€â”€ generate_report() [callback]
    â”‚   â””â”€â”€ Reset Button
    â”‚       â””â”€â”€ reset_workflow()
    â”‚
    â””â”€â”€ get_auto_scroll_script()            [JavaScript injection]
```

## Data Flow

```
User Action          â†’  State Change            â†’  UI Update
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Upload files         â†’  uploaded_files_cache    â†’  File list shown
Click Continue       â†’  workflow_step = 2       â†’  Step 2 unlocked
                        scroll_to_step = "step-2" â†’  Auto-scroll

Process files        â†’  processed_files {}      â†’  Progress bar
                        step_completed[2] = True â†’  Editor shown

Edit data            â†’  processed_files[file]   â†’  Table updated

Click Continue       â†’  workflow_step = 3       â†’  Step 3 unlocked
                        scroll_to_step = "step-3" â†’  Auto-scroll

Download files       â†’  (no state change)       â†’  Files downloaded

Click Reset          â†’  workflow_step = 1       â†’  Back to Step 1
                        step_completed = {}     â†’  All steps locked
                        processed_files = {}    â†’  Data cleared
                        scroll_to_step = "step-1" â†’  Scroll to top
```

## State Dependencies

```
workflow_step (enum)
â”œâ”€â”€ UPLOAD (1)      â† Always accessible
â”œâ”€â”€ PROCESS_EDIT (2) â† Requires: uploaded_files_cache not empty
â””â”€â”€ DOWNLOAD (3)     â† Requires: processed_files not empty

step_completed (dict)
â”œâ”€â”€ UPLOAD: False/True
â”œâ”€â”€ PROCESS_EDIT: False/True
â””â”€â”€ DOWNLOAD: False/True

uploaded_files_cache (dict)
â””â”€â”€ {filename: file_bytes}
    â””â”€â”€ Used by: process_file()

processed_files (dict)
â””â”€â”€ {filename: {df, encoding, pre_header, unique_attendees}}
    â”œâ”€â”€ Used by: render_editor()
    â””â”€â”€ Used by: render_download_step()

attendee_ref (DataFrame)
â””â”€â”€ Required for all processing
    â”œâ”€â”€ Loaded in: initialize_session_state()
    â””â”€â”€ Used by: process_file()
```

## Callback Flow

```
render_upload_step()
    â””â”€â”€ Continue Button
        â””â”€â”€ advance_to_next_step()
            â”œâ”€â”€ mark_step_complete(UPLOAD)
            â”œâ”€â”€ set_current_step(PROCESS_EDIT)
            â”œâ”€â”€ scroll_to_step = "step-2"
            â””â”€â”€ st.rerun()

render_process_edit_step(process_file, render_editor)
    â””â”€â”€ Process Button
        â””â”€â”€ for each file:
            â””â”€â”€ process_file(filename, bytes) â†’ result
                â”œâ”€â”€ read_csv_with_detection()
                â”œâ”€â”€ estimate_attendee_count()
                â”œâ”€â”€ sample_attendee_ids()
                â”œâ”€â”€ get_unique_attendees()
                â””â”€â”€ return {df, encoding, ...}
                    â””â”€â”€ stored in processed_files[filename]

render_download_step(generate_report)
    â””â”€â”€ Download Buttons
        â””â”€â”€ generate_report(file_data) â†’ HTML string
            â”œâ”€â”€ generate_html_report()
            â””â”€â”€ return report

render_sticky_header()
    â””â”€â”€ Reset Button
        â””â”€â”€ reset_workflow()
            â”œâ”€â”€ workflow_step = UPLOAD
            â”œâ”€â”€ step_completed = {}
            â”œâ”€â”€ scroll_to_step = "step-1"
            â””â”€â”€ st.rerun()
```

## CSS Class Structure

```
.sticky-header
â”œâ”€â”€ .sticky-header-content
    â”œâ”€â”€ .header-left
    â”‚   â”œâ”€â”€ .header-title
    â”‚   â””â”€â”€ .header-subtitle
    â”œâ”€â”€ .step-indicator
    â”‚   â”œâ”€â”€ .step-indicator-item
    â”‚   â”‚   â”œâ”€â”€ .step-circle
    â”‚   â”‚   â””â”€â”€ .step-label
    â”‚   â”‚       â”œâ”€â”€ .step-name
    â”‚   â”‚       â””â”€â”€ .step-status
    â”‚   â””â”€â”€ .step-connector
    â””â”€â”€ .header-right
        â””â”€â”€ .reset-button

.workflow-section (id="step-N")
â”œâ”€â”€ .section-header
â”‚   â”œâ”€â”€ .section-number
â”‚   â”œâ”€â”€ .section-title
â”‚   â””â”€â”€ .section-description
â”œâ”€â”€ .upload-container (Step 1)
â”‚   â”œâ”€â”€ .upload-icon
â”‚   â”œâ”€â”€ .upload-title
â”‚   â””â”€â”€ .upload-subtitle
â”œâ”€â”€ .progress-container (Step 2)
â”‚   â”œâ”€â”€ .progress-header
â”‚   â”‚   â”œâ”€â”€ .progress-title
â”‚   â”‚   â””â”€â”€ .progress-count
â”œâ”€â”€ .card (Step 3)
â””â”€â”€ .section-divider

.section-locked
â”œâ”€â”€ ::before (blur overlay)
â””â”€â”€ ::after (lock message)
```

---

**Note**: This is a high-level component tree. Each component contains additional Streamlit elements (buttons, dataframes, expanders, etc.) not shown here for clarity.
